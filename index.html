<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Animacja 1 by Mateusz BÄ™benek</title>
</head>

<body>
    <canvas id="myCanvas" width="800" height="600" style="border:2px solid #d3d3d3;">
    </canvas>
</body>

<script>
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");

    const rectWidth = c.offsetWidth / 8.0;
    const rectHeight = c.offsetWidth / 40.0;
    const rectY = c.offsetHeight - rectHeight - 10;
    var rectX = c.offsetWidth / 2.0 - rectWidth / 2.0;

    var p = { x: 25, y: rectY };
    var velo = 3,
    corner = 50,
    rad = 5;
    var ball = { x: p.x, y: p.y };
    var moveY = Math.sin(Math.PI / 180 * corner) * velo;

    rect = ctx.rect(rectX, rectY, rectWidth, rectHeight);
    ctx.stroke();

    document.addEventListener('keydown', function (e) {
        switch (e.keyCode) {
            case 37:
                moveLeft();
                break;
            case 39:
                moveRight();
                break;
            case 32:
                shooting();
                break;
        }
    });

    function shooting() {
        ctx.clearRect(0, 0, 800, 600);

        ball.x = rectX;
        ball.y -= moveY;

        ctx.beginPath();
        ctx.arc(ball.x, ball.y, rad, 0, Math.PI * 2, false);
        ctx.stroke();
        ctx.closePath();
    }

    function moveRight() {
        if (rectX < c.getBoundingClientRect().right - rectWidth - 20) {
            ctx.clearRect(0, 0, 800, 600);
            ctx.beginPath();
            rectX += 10;
            ctx.rect(rectX, rectY, rectWidth, rectHeight);
            ctx.stroke();
            ctx.closePath();
        } else {
            return;
        }
    }

    function moveLeft() {
        if (rectX > c.getBoundingClientRect().left) {
            ctx.clearRect(0, 0, 800, 600);
            ctx.beginPath();
            rectX -= 10;
            ctx.rect(rectX, rectY, rectWidth, rectHeight);
            ctx.stroke();
            ctx.closePath();
        } else {
            return;
        }
    }


</script>


</html>